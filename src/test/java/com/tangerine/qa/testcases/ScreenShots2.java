

	
	package com.tangerine.qa.testcases;

	import java.io.File;
	import java.io.IOException;
	import java.util.concurrent.TimeUnit;

	import org.apache.commons.io.FileUtils;
	import org.openqa.selenium.By;
	import org.openqa.selenium.OutputType;
	import org.openqa.selenium.TakesScreenshot;
	import org.openqa.selenium.WebDriver;
	import org.openqa.selenium.WebElement;
	import org.openqa.selenium.chrome.ChromeDriver;
	import org.openqa.selenium.support.FindBy;
	import org.openqa.selenium.support.How;
	import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.Assert;
	import org.testng.annotations.BeforeMethod;
	import org.testng.annotations.Test;

	import com.tangerine.qa.base.TestBase;
	import com.tangerine.qa.pages.LoginPage;
	import com.tangerine.qa.pages.ScreenshotsPage;
	import com.tangerine.qa.utils.TestUtil;

	import utils.TimeUtil;

	public class ScreenShots2 extends TestBase {

		public static WebDriver driver;

		static String[] list = {
				"256726000005","256726000361","256726000362","256726000363","256726000364","256726000365",
				"256726000367","256726000373","256726000375","256726000376","256726000394","256726000398","256726000400",
				"256726000409","256726000410","256726000416","256726000419","256726000431","256726000433","256726000435",
				"256726000436","256726000439","256726000442","256726000445","256726000446","256726000448","256726000452",
				"256726000454","256726000466","256726000470","256726000474","256726000475","256726000481","256726000484",
				"256726000486","256726000492","256726000495","256726000498","256726000502","256726000507","256726000515",
				"256726000521","256726000528","256726000541","256726000545","256726000546","256726000548","256726000549",
				"256726000556","256726000558","256726000561","256726000562","256726000570","256726000575","256726000579",
				"256726000580","256726000583","256726000603","256726000612","256726000615","256726000617","256726000619",
				"256726000636","256726000642","256726000648","256726000665","256726000666","256726000669","256726000688",
				"256726000693","256726000696","256726000697","256726000700","256726000720","256726000722","256726000723",
				"256726000725","256726000727","256726000728","256726000729","256726000731","256726000737","256726000740",
				"256726000742","256726000757","256726000760","256726000764","256726000768","256726000780","256726000781",
				"256726000800","256726000801","256726000808","256726000809","256726000811","256726000813","256726000815",
				"256726000816","256726000819","256726000831","256726000834","256726000835","256726000838","256726000846",
				"256726000850","256726000851","256726000865","256726000866","256726000870","256726000872","256726000873",
				"256726000878","256726000879","256726000886","256726000894","256726000900","256726000901","256726000902",
				"256726000903","256726000915","256726000918","256726000919","256726000925","256726000927","256726000932",
				"256726000934","256726000936","256726000939","256726000942","256726000944","256726000966","256726000967",
				"256726000969","256726000980","256726000983","256726000986","256726000988","256726000990","256726000991",
				"256726000994","256726000997","256726000998","256726001000","256726001003","256726001004","256726001005",
				"256726001007","256726001008","256726001018","256726001019","256726001120","256726001149","256726001204",
				"256726001205","256726001218","256726001236","256726001238","256726001243","256726001251","256726001254",
				"256726001269","256726001272","256726001287","256726001291","256726001297","256726001298","256726001300",
				"256726001301","256726001307","256726001309","256726001315","256726001321","256726001337","256726001339",
				"256726001342","256726001348","256726001349","256726001354","256726001355","256726001357","256726001359",
				"256726001361","256726001362","256726001364","256726001366","256726001368","256726001374","256726001377",
				"256726001378","256726001405","256726001408","256726001409","256726001410","256726001411","256726001417",
				"256726001443","256726001444","256726001445","256726001449","256726001454","256726001458","256726001461",
				"256726001462","256726001463","256726001466","256726001476","256726001483","256726001490","256726001506",
				"256726001515","256726001516","256726001527","256726001533","256726001535","256726001539","256726001546",
				"256726001563","256726001580","256726001583","256726001592","256726001598","256726001612","256726001614",
				"256726001615","256726001643","256726001647","256726001652","256726001664","256726012529","256726012530",
				"256726012531","256726012532","256726012533","256726012534","256726012537","256726001904","256726001918",
				"256726001938","256726001974","256726001977","256726001995","256726001999","256726002000","256726002002",
				"256726002005","256726002015","256726002016","256726002018","256726002027","256726002028","256726002039",
				"256726002048","256726002068","256726002076","256726002085","256726002089","256726002096","256726002121",
				"256726002123","256726002133","256726002134","256726002137","256726002141","256726002143","256726002146",
				"256726002147","256726002164","256726002178","256726002184","256726002203","256726002218","256726002225",
				"256726002230","256726002232","256726002235","256726002253","256726002265","256726002273","256726002279",
				"256726002290","256726002291","256726002297","256726002304","256726002306","256726002315","256726002321",
				"256726002327","256726002328","256726002341","256726002345","256726002347","256726002352","256726002358",
				"256726002368","256726002371","256726002384","256726002395","256726002400","256726002402","256726002423",
				"256726002426","256726002428","256726002429","256726002430","256726002433","256726002447","256726002448",
				"256726002454","256726002464","256726002469","256726002492","256726002497","256726002515","256726002522",
				"256726002523","256726002530","256726002531","256726002535","256726002541","256726002542","256726002549",
				"256726002553","256726002558","256726002581","256726002583","256726002586","256726002589","256726002590",
				"256726002591","256726002607","256726002612","256726002620","256726002627","256726002628","256726002640",
				"256726002642","256726002658","256726002661","256726002687","256726002699","256726002701","256726002703",
				"256726002723","256726002731","256726002741","256726002750","256726002751","256726002760","256726002762",
				"256726002766","256726002777","256726002782","256726002796","256726002798","256726002813","256726002821",
				"256726002823","256726002830","256726002833","256726002836","256726002841","256726002846","256726002855",
				"256726002862","256726002863","256726002864","256726002865","256726002876","256726002877","256726002900",
				"256726002901","256726002908","256726002913","256726002914","256726002915","256726002924","256726002925",
				"256726002933","256726002938","256726002941","256726002942","256726002949","256726002950","256726002951",
				"256726002961","256726002964","256726002977","256726002993","256726003010","256726003019","256726003030",
				"256726003034","256726003036","256726003040","256726003042","256726003049","256726003069","256726003082",
				"256726003103","256726003113","256726003216","256726003217","256726003218","256726003321","256726003326",
				"256726003327","256726003335","256726003344","256726003345","256726003350","256726003354","256726003366",
				"256726003374","256726003381","256726003385","256726003386","256726003396","256726003404","256726003408",
				"256726003410","256726003412","256726003418","256726003423","256726003432","256726003438","256726003445",
				"256726003465","256726003467","256726003483","256726003487","256726003494","256726003498","256726003499",
				"256726003507","256726003516","256726003530","256726003531","256726003534","256726003535","256726003541",
				"256726003551","256726003556","256726003565","256726003568","256726003574","256726003580","256726003592",
				"256726003597","256726003600","256726003604","256726003612","256726003620","256726003621","256726003623",
				"256726003630","256726003643","256726003645","256726003646","256726003647","256726003649","256726003654",
				"256726003661","256726003666","256726003667","256726003669","256726003671","256726003673","256726003674",
				"256726003676","256726003678","256726003686","256726003689","256726003692","256726003695","256726003709","256726003725","256726003736","256726003752","256726003756","256726003758","256726003773","256726003775","256726003781","256726003782","256726003789","256726003796","256726003802","256726003813","256726003814","256726003816","256726003826","256726003829","256726003830","256726003856","256726003900","256726003912","256726003920","256726003928","256726003935","256726003943","256726003951","256726003958","256726003966","256726003974","256726003981","256726003989","256726003997","256726004004","256726004012","256726004020","256726004028","256726004035","256726004043","256726004051","256726004058","256726004066","256726004074","256726004081","256726004089","256726004097","256726004104","256726004112","256726004120","256726004127","256726004135","256726004143","256726004150","256726004158","256726004166","256726004173","256726004181","256726004189","256726004196","256726004204","256726004212","256726004219","256726004227","256726004235","256726004242","256726004250","256726004258","256726004265","256726004273","256726004281","256726004288","256726004296","256726004304","256726004311","256726004319","256726004327","256726004334","256726004342","256726004350","256726004357","256726004365","256726004373","256726004380","256726004388","256726004396","256726004403","256726004411","256726004419","256726004426","256726004434","256726004442","256726004449","256726004457","256726004465","256726004472","256726004480","256726004488","256726004495","256726004503","256726004511","256726004518","256726004595","256726004601","256726004603","256726004609","256726004611","256726004617","256726004621","256726004623","256726004629","256726004630","256726004632","256726004666","256726004669","256726004671","256726004674","256726004677","256726004679","256726004681","256726004686","256726004689","256726004690","256726004696","256726004698","256726004699","256726004702","256726004705","256726004711","256726004712","256726004713","256726004715","256726004728","256726004734","256726004745","256726004746","256726004748","256726004749","256726004757","256726004762","256726004771","256726004773","256726004777","256726004779","256726004784","256726004786","256726004791","256726004795","256726004808","256726004810","256726004812","256726004820","256726004821","256726004823","256726004827","256726004828","256726004830","256726004831","256726004834","256726004836","256726004841","256726004852","256726004855","256726004858","256726004860","256726004869","256726004872","256726004876","256726004880","256726004887","256726004899","256726004903","256726004908","256726004909","256726004921","256726004935","256726004942","256726004943","256726004944","256726004949","256726004964","256726004971","256726004973","256726004974","256726004989","256726004990","256726004991","256726004993","256726004998","256726005000","256726005006","256726005007","256726005009","256726005011","256726005012","256726005016","256726005017","256726005018","256726005020","256726005024","256726005047","256726005060","256726005063","256726005078","256726005083","256726005090","256726005102","256726005106","256726005112","256726005114","256726005115","256726005117","256726005119","256726005125","256726005127","256726005133","256726005136","256726005147","256726005164","256726005167","256726005171","256726005173","256726005174","256726005177","256726005179","256726005182","256726005185","256726005190","256726005202","256726005210","256726005216","256726005217","256726005224","256726005226","256726005227","256726005234","256726005241","256726005242","256726005244","256726005247","256726005264","256726005268","256726005280","256726005281","256726005282","256726005284","256726005287","256726005288","256726005291","256726005292","256726005293","256726005294","256726005295","256726005296","256726005299","256726005310","256726005321","256726005337","256726005338","256726005339","256726005340","256726005342","256726005351","256726005365","256726005367","256726005368","256726005369","256726005374","256726005378","256726005380","256726005384","256726005386","256726005398","256726005405","256726005422","256726005440","256726005445","256726005447","256726005452","256726005456","256726005457","256726005458","256726005467","256726005471","256726005477","256726005479","256726005481","256726005484","256726005485","256726005493","256726005500","256726005501","256726005502","256726005503","256726005504","256726005507","256726005508","256726005510","256726005522","256726005523","256726005526","256726005529","256726005534","256726005538","256726005545","256726005546","256726005547","256726005549","256726005556","256726005564","256726005567","256726005569","256726005572","256726005578","256726005582","256726005583","256726005589","256726005591","256726005600","256726005610","256726005616","256726005617","256726005618","256726005623","256726005624","256726005625","256726005629","256726005631","256726005634","256726005636","256726005642","256726005645","256726005649","256726005652","256726005660","256726005669","256726005673","256726005687","256726005688","256726005692","256726005704","256726005717","256726005718","256726005719","256726005720","256726005723","256726005724","256726005729","256726005732","256726005734","256726005746","256726005748","256726005749","256726005755","256726005775","256726005780","256726005782","256726005785","256726005791","256726005793","256726005794","256726005796","256726005799","256726005801","256726005804","256726005806","256726005808","256726005811","256726005814","256726005819","256726005822","256726005826","256726005833","256726005834","256726005835","256726005836","256726005838","256726005839","256726005842","256726005844","256726005845","256726005846","256726005848","256726005851","256726005855","256726005856","256726005857","256726005858","256726005859","256726005861","256726005862","256726005865","256726005874","256726005875","256726005876","256726005878","256726005879","256726005885","256726005889","256726005890","256726005893","256726005894","256726005896","256726005899","256726005901","256726005902","256726005904","256726005916","256726005920","256726005922","256726005924","256726005925","256726005934","256726005938","256726005941","256726005942","256726005946","256726005947","256726005953","256726005956","256726005957","256726005958","256726005965","256726005966","256726005967","256726005968","256726005970","256726005972","256726005974","256726005978","256726005979","256726005980","256726005983","256726005985","256726005991","256726012550","256726012551","256726012553","256726012554","256726012555","256726012556","256726012557" };

		static int lenght = list.length;

		static String workingDirectory = System.getProperty("user.dir");

		@Test
		public void login() throws Exception {
			System.setProperty("webdriver.chrome.driver", "/opt/chromedriver");

			driver = new ChromeDriver();

			// goto url
			driver.get("http://41.217.232.48/admin/");

			TimeUtil.timeDelay(2);
			driver.manage().window().maximize();

			driver.findElement(By.id("userNames")).sendKeys("lyca_ccmanager");

			TimeUtil.timeDelay(2);
			driver.findElement(By.id("password")).sendKeys("India@2020");

			TimeUtil.timeDelay(2);
			driver.findElement(By.id("submit")).click();

			
			
			WebDriverWait wait = new WebDriverWait(driver,140);
			wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("/html/body/div[1]/div/div[1]/div[1]/div[1]/img")));

			boolean image = driver.findElement(By.xpath("/html/body/div[1]/div/div[1]/div[1]/div[1]/img")).isDisplayed();
			Assert.assertTrue(image);

			TimeUtil.timeDelay(2);
			System.out.println("Login Successfully");

			TimeUtil.timeDelay(2);
			driver.findElement(By.id("customerUser")).click();

			// create directory
			for (int i = 0; i < lenght; i++) {

				CreateADirectory(list[i]);
			}

		}

		public void CreateADirectory(String DirectoryName) throws Exception

		{

			for (int j = 0; j <= lenght - 1; j++) {

				if (DirectoryName == list[j]) {

					// project directory
					String workingDirectory = System.getProperty("user.dir");
					String dir = workingDirectory + File.separator + DirectoryName;

					System.out.println("Final file directory : " + dir);

					// create a directory in the path

					File file = new File(dir);

					if (!file.exists()) {
						file.mkdir();
						System.out.println("Directory is created!");
					} else {
						System.out.println("Directory is already existed!");
					}

					TimeUtil.timeDelay(2);
					driver.findElement(By.xpath("//*[@id=\"customerUserBody\"]/ul/li[1]/a")).click();

					TimeUtil.timeDelay(2);
					driver.findElement(By.id("search")).sendKeys(list[j]);
					
					
					WebDriverWait wait = new WebDriverWait(driver,40);
					wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//*[@id=\"regionType\"]/tbody/tr/td[1]/a")));

					TimeUtil.timeDelay(2);
					driver.findElement(By.xpath("//*[@id=\"regionType\"]/tbody/tr/td[1]/a")).click();

					WebDriverWait wait2 = new WebDriverWait(driver,55);
					wait2.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("/html/body/div[1]/div/div[3]/div[3]/div/div/div[2]/label[2]")));
					
					TimeUtil.timeDelay(2);
					WebElement subscriptions=driver.findElement(By.xpath("/html/body/div[1]/div/div[3]/div[3]/div/div/div[2]/label[2]"));
					subscriptions.click();
					
					TimeUtil.timeDelay(5);
					ScreenShots.takeSnapShot(driver, dir + File.separator + list[j] + "-subscriptions");
					System.out.println(dir);
					
					

					TimeUtil.timeDelay(5);
					driver.findElement(By.id(list[j])).click();
					
					TimeUtil.timeDelay(2);
					driver.findElement(By.xpath("/html/body/div[4]/div/div/div/div[2]/div/div[3]/label[3]")).click();
					
					
					WebDriverWait wait4 = new WebDriverWait(driver,40);
					wait4.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//*[@id=\"postpaidRecharge\"]/div[2]/div/div/div/table/tbody/tr/td[2]")));

					TimeUtil.timeDelay(5);
					ScreenShots.takeSnapShot(driver, dir + File.separator + list[j] + "-Bundles");

					
					TimeUtil.timeDelay(5);
					driver.findElement(By.xpath("//*[@id=\"postpaidRecharge\"]/div[1]/span")).click();

					

					


					try {
						
						TimeUtil.timeDelay(5);
						
						WebDriverWait wait6 = new WebDriverWait(driver,40);
						wait6.until(ExpectedConditions.visibilityOfElementLocated(By.id("esc_button")));
						
						
						WebElement element = driver.findElement(By.id("esc_button"));

						element.isDisplayed();
						System.out.println("Close button has displayed");
						
						TimeUtil.timeDelay(10);
						ScreenShots.takeSnapShot(driver, dir + File.separator + list[j] + "-OldBundles");
						
						
						element.click();
					} catch (Exception e) {
						System.out.println("Close  button did not displayed");
					}

					TimeUtil.timeDelay(5);
					driver.findElement(By.xpath("/html/body/div[4]/div/div/div/div[2]/div/button")).click();

				}

			}

		}

		public static void takeSnapShot(WebDriver webdriver, String fileWithPath) throws Exception {

			TakesScreenshot scrShot = ((TakesScreenshot) webdriver);

			File SrcFile = scrShot.getScreenshotAs(OutputType.FILE);

			File DestFile = new File(fileWithPath);

			FileUtils.copyFile(SrcFile, DestFile);
		}

	}


